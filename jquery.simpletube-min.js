// SimpleTube v1.0.0 - a very lightweight youtube displaying extension - based on jQuery 1.3+
// http://hereswhatidid.com/simpletube/
// Copyright (c) 2010 Gabe Shackle - gabe@hereswhatidid.com
// Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
(function(b){function h(a,d,f){f.find(".videooutput").flash().remove();strSWFURL="http://www.youtube.com/v/"+a+"?enablejsapi=1&playerapiid=ytplayer";strSWFURL=d.related?strSWFURL+"&rel=1":strSWFURL+"&rel=0";f.find(".videooutput").flash({swf:strSWFURL,width:d.videowidth,height:d.videoheight})}b.fn.simpletube=function(a){a=b.extend({feedid:"LieNielsen",maxresults:10,defaultvideo:"none",displaytype:"single",activeclass:"active",videowidth:450,videoheight:356,showthumbnails:true,showdescription:false,
related:false,thumbpos:"after"},a);return this.each(function(){var d=b(this).html('<div class="videoholder"><div class="videooutput"></div></div>'),f="http://gdata.youtube.com/feeds/api/users/LieNielsen/uploads?v=2&alt=jsonc";b(this).data("maxresults",a.maxresults);b(this).data("defaultvideo",a.defaultvideo);b(this).data("displaytype",a.displaytype);b(this).data("related",a.related);switch(a.displaytype){case "playlist":f="http://gdata.youtube.com/feeds/api/playlists/"+a.feedid+"?v=2&alt=jsonc";break;
case "single":f="http://gdata.youtube.com/feeds/api/videos/"+a.feedid+"?v=2&alt=jsonc";break;case "user":f="http://gdata.youtube.com/feeds/api/users/"+a.feedid+"/uploads?v=2&alt=jsonc"}f=b(this).data("related")?f+"&rel=1":f+"&rel=0";b(this).data("videowidth",a.videowidth);b(this).data("videoheight",a.videoheight);b(this).data("activeclass",a.activeclass);b(this).data("showthumbnails",a.showthumbnails);b(this).data("showdescription",a.showdescription);b(this).data("thumbpos",a.thumbpos);b.ajax({url:f,
dataType:"jsonp",success:function(c){if(a.displaytype==="playlist"||a.displaytype==="user"){c=c.data.items||[];var i=0;if(a.showthumbnails){a.thumbpos==="before"?d.prepend('<div class="videothumbnails"></div>'):d.append('<div class="videothumbnails"></div>');for(var g=d.find(".videothumbnails"),j=a.maxresults!==0&&a.maxresults<=c.length?a.maxresults:c.length,e=0;e<j;e++)if(a.displaytype==="user"){g.append('<div><img src="'+c[e].thumbnail.sqDefault+'" class="'+c[e].id+'" /><br /><span class="thumbdescription">'+
c[e].title+"</span></div>");if(a.defaultvideo===c[e].id)i=e}else{g.append('<div><img src="'+c[e].video.thumbnail.sqDefault+'" class="'+c[e].video.id+'" /><br /><span class="thumbdescription">'+c[e].video.title+"</span></div>");if(a.defaultvideo===c[e].video.id)i=e}g.find("div").click(function(){g.find("div").removeClass(a.activeclass);h(b(this).addClass(a.activeclass).find("img").attr("class"),a,d)});g.find("div:first").addClass(a.activeclass)}else d.addClass("nothumbs");a.displaytype==="user"?h(c[i].id,
a,d):h(c[i].video.id,a,d)}else{d.addClass("nothumbs");h(c.data.id,a,d)}}})})}})(jQuery);